<ng-container *ngIf="isBookExist; else elseTemplate">
  <section class="content">
    <ng-container *ngIf="isLoaded">
      <swiper
        #swiperRef
        [slidesPerView]="1"
        [spaceBetween]="50"
        (swiper)="initSwiper()"
        [keyboard]="{
          enabled: true
        }"
        [virtual]="true"
        [effect]="'creative'"
        [navigation]="true"
        [creativeEffect]="{
          prev: {
            shadow: true,
            translate: [0, 0, -400]
          },
          next: {
            translate: ['100%', 0, 0]
          }
        }"
        (slideChange)="onSlideChange($event)"
      >
        <ng-container *ngFor="let sentense of sentenses; index as i">
          <ng-template swiperSlide>
            <mat-card class="word-viewer">
              <div class="card-content">
                <ng-container
                  *ngIf="setting?.order === viewerOrder.JAEN; else JAEN_EN"
                >
                  {{ sentense.ja }}
                </ng-container>
                <ng-template #JAEN_EN>
                  <app-en-sentense
                    [sentense]="sentense.en"
                    [pronunciation]="sentense.pronunciation"
                    (wordClick)="onClickWord($event)"
                  ></app-en-sentense>
                </ng-template>
              </div>
              <div class="card-content hide-target">
                <div class="hide-target-text">
                  <ng-container
                    *ngIf="setting?.order === viewerOrder.JAEN; else JAEN_JA"
                  >
                    <app-en-sentense
                      [sentense]="sentense.en"
                      [pronunciation]="sentense.pronunciation"
                      (wordClick)="onClickWord($event)"
                    ></app-en-sentense>
                  </ng-container>
                  <ng-template #JAEN_JA>
                    {{ sentense.ja }}
                  </ng-template>
                </div>
                <div
                  class="hide"
                  *ngIf="isSecondSentenseHide && setting?.secondLangIsHide"
                  (click)="onClickHide()"
                >
                  🫣 Check Answer!!🫣
                </div>
              </div>
              <div class="card-content note" *ngIf="sentense.note">
                <div class="note-title">NOTE</div>
                <div class="note-body">
                  {{ sentense.note }}
                </div>
              </div>
            </mat-card>
          </ng-template>
        </ng-container>
      </swiper>
      <mat-card class="action-buttons">
        <mat-slider
          discrete
          class="slider"
          min="0"
          [max]="sentenses.length - 1"
          step="1"
        >
          <input
            matSliderThumb
            [(ngModel)]="activeSentenseNumber"
            (valueChange)="onChangeActivevNumberFromBar($event)"
          />
        </mat-slider>
        <button mat-mini-fab (click)="onOpenSetting()">
          <mat-icon fontIcon="settings"></mat-icon>
        </button>

        <div class="action-buttons-item">
          <button mat-mini-fab aria-label="Slowly play" (click)="onPlay(0.7)">
            <mat-icon fontIcon="slow_motion_video"></mat-icon>
          </button>
          <button mat-fab color="primary" aria-label="Play" (click)="onPlay(1)">
            <mat-icon
              style="transform: scale(1.6)"
              fontIcon="play_arrow"
            ></mat-icon>
          </button>
        </div>

        <div class="action-buttons-item">
          <button mat-mini-fab aria-label="Recording" (click)="onRecordVoice()">
            <mat-icon [fontIcon]="isRecording ? 'pause' : 'mic'"></mat-icon>
          </button>
          <button
            mat-mini-fab
            aria-label="Recording"
            (click)="onHearVoice()"
            [disabled]="!isRecorded"
          >
            <mat-icon fontIcon="hearing"></mat-icon>
          </button>
        </div>
      </mat-card>
    </ng-container>
  </section>
</ng-container>
<ng-template #elseTemplate>
  <section class="not-exist">
    <div>
      <mat-icon class="not-exist-icon">sentiment_very_dissatisfied</mat-icon>
    </div>
    <div class="not-exist-content">この単語帳は存在しません</div>
  </section>
</ng-template>
